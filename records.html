<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>系统级结构化模型库</title>
<style>
  :root {
    --bg-body: #f7f7f7;
    --bg-container: #ffffff;
    --bg-model: #fafafa;
    --border-model: #333;
    --border-warning: #e5533d;
    --bg-warning: #fff5f5;
    --tag-bg: #eaeaea;
    --tag-color: #222;
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  body {
    font-family: var(--font-family);
    background: var(--bg-body);
    color: #222;
    margin: 0;
    padding: 24px;
    line-height: 1.6;
  }
  .container {
    max-width: 960px;
    margin: auto;
    background: var(--bg-container);
    padding: 32px;
    border-radius: 8px;
  }
  h1 { font-size: 28px; margin-bottom: 12px; }
  .page-desc { color: #666; font-size: 14px; margin-bottom: 24px; }
  .divider { height:1px; background:#eee; margin:24px 0; }
  .search-bar { margin: 20px 0; }
  .search-bar input {
    padding:8px 12px;
    width:100%;
    max-width:300px;
    border-radius:6px;
    border:1px solid #ccc;
    font-size:14px;
  }
  .model { 
    margin-top: 24px;
    padding:20px;
    background: var(--bg-model);
    border-left:4px solid var(--border-model);
    border-radius:6px;
    transition: all 0.3s;
  }
  .model-title { 
    font-size:18px; 
    display:flex; 
    justify-content: space-between; 
    align-items:center; 
  }
  .toggle-btn {
    background:#eee;
    border:none;
    border-radius:4px;
    padding:4px 10px;
    cursor:pointer;
    font-size:12px;
  }
  .model-content { margin-top:12px; }
  .model-item { margin-top:12px; }
  .model-item strong { display:block; margin-bottom:4px; }
  ul { margin:6px 0 6px 18px; }
  .warning {
    background: var(--bg-warning);
    border-left:4px solid var(--border-warning);
    padding:12px;
    border-radius:4px;
    margin-top:12px;
  }
  .collapsed .model-content { display:none; }

  /* 过期样式 */
  .model-expired { border-left-color:#e5533d; opacity:0.8; }
  .model-system-note {
    background:#fff3f3;
    border-left:4px solid #e5533d;
    padding:10px;
    margin-bottom:14px;
    font-size:14px;
  }
  .tag {
    display:inline-block;
    background: var(--tag-bg);
    color: var(--tag-color);
    padding:2px 8px;
    margin-right:8px;
    border-radius:4px;
    font-size:13px;
    cursor:pointer;
  }
</style>
</head>
<body>
<div class="container">
<h1>系统级结构化模型库</h1>
<p class="page-desc">本系统展示可调用判断模型，模型需绑定记录才能有效，否则自动过期。</p>

<div class="search-bar">
  <input type="text" id="tagSearch" placeholder="输入标签过滤模型，例如：AI分析">
</div>

<div class="model-container">

<!-- 模型示例开始 -->
<div class="model" data-model-id="emotion-template" data-review-cycle="30">
  <h2 class="model-title">
    情绪模板识别
    <button class="toggle-btn">折叠</button>
  </h2>
  <span class="tag">信息过滤</span>
  <span class="tag">行为修正</span>
  <div class="model-content">
    <p><strong>覆盖话题：</strong>短视频情绪叙事、共鸣型内容、上瘾机制</p>
    <div class="model-item">
      <strong>统一本质</strong>
      <p>内容是否成立不重要，是否触发既有情绪模板才重要。</p>
    </div>
    <div class="model-item warning">
      <strong>行为约束</strong>
      <p>只允许观察其结构，禁止据此行动或转发。</p>
    </div>
  </div>
</div>

<div class="model" data-model-id="structure-boundary" data-review-cycle="30">
  <h2 class="model-title">
    结构模型使用边界
    <button class="toggle-btn">折叠</button>
  </h2>
  <span class="tag">趋势判断</span>
  <span class="tag">AI分析</span>
  <div class="model-content">
    <p><strong>覆盖话题：</strong>生产力、生产关系、制度秩序、AI泡沫</p>
    <div class="model-item">
      <strong>判断逻辑</strong>
      <p>先判断主导变量，再决定是否使用该模型。</p>
    </div>
  </div>
</div>

<div class="model" data-model-id="finance-risk" data-review-cycle="30">
  <h2 class="model-title">
    金融与风险溢价
    <button class="toggle-btn">折叠</button>
  </h2>
  <span class="tag">金融认知</span>
  <div class="model-content">
    <div class="model-item">
      <strong>统一本质</strong>
      <p>价格波动 ≠ 价值变化，多数来自预期反复修正。</p>
    </div>
  </div>
</div>

<div class="model" data-model-id="ai-structure" data-review-cycle="30">
  <h2 class="model-title">
    AI结构判断
    <button class="toggle-btn">折叠</button>
  </h2>
  <span class="tag">AI工具</span>
  <div class="model-content">
    <div class="model-item">
      <strong>现实过滤器</strong>
      <ul>
        <li>技术可行性</li>
        <li>生产关系适配</li>
        <li>是否到达临界点</li>
      </ul>
    </div>
  </div>
</div>

<div class="model" data-model-id="multi-game" data-review-cycle="30">
  <h2 class="model-title">
    多变量博弈判断
    <button class="toggle-btn">折叠</button>
  </h2>
  <span class="tag">现实博弈</span>
  <span class="tag">制度分析</span>
  <div class="model-content">
    <div class="model-item">
      <strong>快速判断</strong>
      <p>若结果涉及现实利益分配 → 默认判定为多变量博弈。</p>
    </div>
    <div class="model-item warning">
      <strong>行动约束</strong>
      <p>未识别成本与收益归属前，不参与站队、不做价值判断。</p>
    </div>
  </div>
</div>

</div>
</div>

<script>
// 折叠功能
document.querySelectorAll('.toggle-btn').forEach(btn=>{
  btn.addEventListener('click',()=>btn.closest('.model').classList.toggle('collapsed'));
});

// 标签搜索
const searchInput = document.getElementById('tagSearch');
searchInput.addEventListener('input',()=>{
  const keyword = searchInput.value.trim().toLowerCase();
  document.querySelectorAll('.model').forEach(model=>{
    const tags = Array.from(model.querySelectorAll('.tag')).map(t=>t.innerText.toLowerCase());
    model.style.display = tags.some(t=>t.includes(keyword)) || keyword===''?'block':'none';
  });
});

// === 系统级 Records 链接逻辑 ===
(function(){
  // 模拟 Records 页面，本例直接写入本地存储
  const records = [
    {modelId:'emotion-template', timestamp:Date.now()-5*24*60*60*1000},
    {modelId:'ai-structure', timestamp:Date.now()-40*24*60*60*1000},
    {modelId:'finance-risk', timestamp:Date.now()-10*24*60*60*1000}
  ];
  localStorage.setItem('modelRecords',JSON.stringify(records));

  const DAY = 24*60*60*1000;
  const now = Date.now();
  const lastRecordMap={};
  records.forEach(r=>{
    if(!lastRecordMap[r.modelId]||r.timestamp>lastRecordMap[r.modelId]) lastRecordMap[r.modelId]=r.timestamp;
  });

  document.querySelectorAll('.model[data-model-id]').forEach(model=>{
    const id = model.dataset.modelId;
    const cycleDays = parseInt(model.dataset.reviewCycle||"30",10);
    const lastUsed = lastRecordMap[id];
    if(!lastUsed){
      expire(model,'无任何现实记录'); return;
    }
    const diffDays = Math.floor((now-lastUsed)/DAY);
    if(diffDays>cycleDays) expire(model,`超过 ${diffDays} 天未被调用`);
  });

  function expire(model,reason){
    model.classList.add('model-expired');
    const note=document.createElement('div');
    note.className='model-system-note';
    note.innerText=`模型已失效：${reason}。禁止作为判断依据。`;
    model.prepend(note);
  }
})();
</script>
</body>
</html>
